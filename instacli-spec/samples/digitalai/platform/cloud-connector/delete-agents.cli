Script info: Delete agents, also from running Cloud Connectors

Input:
  endpoint:
    description: Digital.ai Platform API endpoint
    tag: digitalai.platform.Endpoint

---
Get token:
  endpoint: ${endpoint}
Http endpoint: ${output}

---
Http GET: /workload/v1/agent_instances/
${agents}: ${output.agent_instances}

If:
  empty: ${agents}
  then:
    Print: No agents available.
    Exit: 0

---
For each:
  ${agent}: ${agents}
  Output:
    name: ${agent.alias} (${agent.description})
    value: ${agent.id}

User input:
  message: Select agents to delete
  choices: ${output}
  type: checkbox
As: agent_id

---
For each:
  ${agent_instance_id}: ${agent_id}
  Print: DELETE /workload/v1/agent_instances/${agent_instance_id}
  Http DELETE: /workload/v1/agent_instances/${agent_instance_id}
