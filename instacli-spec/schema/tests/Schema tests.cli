Test case: Add a value node

Validate:
  data: 1
  schema: ../Add.schema.yaml

Expected error: Add should only accept arrays

---
Test case: No extra properties in If

Validate:
  data:
    empty: { }
    then:
      Print: something
    extra: property
  schema: ../If.schema.yaml

Expected error: Schema should not allow extra properties in If

---
Test case: If without then

Validate:
  data:
    empty: { }
  schema: ../If.schema.yaml

Expected error: Schema should not allow missing 'then'

---
Test case: When with both 'then' and 'else'

Validate:
  data:
    - empty: { }
      then:
        Print: something
      else:
        Print: else
  schema: ../When.schema.yaml

Expected error: Having both 'then' and 'else' should trigger a validation error

---
Test case: Validate conditions in When

Validate:
  data:
    - not:
        strange: property
      then:
        Print: something
  schema: ../When.schema.yaml

Expected error: Conditions should be properly validated

---
Test case: Schema magic - additional properties and oneOf

Validate:
  data:
    cereal: maybe
    fruit: yes
    sugar: no
  schema:
    type: object
    properties:
      cereal: { }
      eggs: { }
      fruit: { }
    additionalProperties: false
    allOf:
      - oneOf:
          - required:
              - cereal
          - required:
              - eggs
      - properties:
          required:
            - fruit

Expected error: Schema should not allow 'sugar'


