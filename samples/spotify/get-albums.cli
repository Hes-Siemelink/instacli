Script info:
  description: Show albums of an artist
  input:
    name: Name of the artist

---
Get artist info:
  name: ${input.name}
As: artist

---
Connect to: Spotify

# Get all albums using paginated requests
${albums}: [ ]
${offset}: 0

Repeat:

  GET: /artists/${artist.id}/albums?include_groups=album&limit=50&offset=${offset}
  As: result

  Add to:
    ${albums}: ${result.items}
    ${offset}: 50

  until:
    empty: ${result.items}

---
Sort:
  items: ${albums}
  by: release_date
As: albums

For each:
  ${album} in: ${albums}
  Print: ${album.name} (${album.release_date})
